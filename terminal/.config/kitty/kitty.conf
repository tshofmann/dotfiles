# ============================================================
# kitty.conf - Kitty Terminal Konfiguration
# ============================================================
# Zweck       : GPU-beschleunigtes Terminal mit Image-Support
# Pfad        : ~/.config/kitty/kitty.conf
# Docs        : https://sw.kovidgoyal.net/kitty/conf/
# Reload      : Ctrl+Cmd+, oder kill -SIGUSR1 $KITTY_PID
# Config-UI   : Cmd+, (√∂ffnet diese Datei im Editor)
# ============================================================

# ------------------------------------------------------------
# Theme: Catppuccin Mocha
# ------------------------------------------------------------
# Theme liegt in current-theme.conf (via Stow verlinkt)
# Wechsel interaktiv: kitten themes
# Palette: https://catppuccin.com/palette
include current-theme.conf

# Titlebar-Farbe: Nutzt die Hintergrundfarbe des Terminals
# WICHTIG: Muss NACH dem include stehen und Kitty muss neu gestartet werden
# (Config-Reload reicht nicht f√ºr diese Einstellung)
#
# Plattform-Support:
#   macOS      ‚Üí macos_titlebar_color (funktioniert immer)
#   GNOME      ‚Üí wayland_titlebar_color (Client-Side Decorations)
#   Hyprland   ‚Üí wayland_titlebar_color (Client-Side Decorations)
#   KDE Plasma ‚Üí NICHT unterst√ºtzt (Server-Side Decorations)
#   X11        ‚Üí NICHT unterst√ºtzt (Window Manager kontrolliert Titlebar)
#
# F√ºr KDE: hide_window_decorations yes + eigene Farbe via KDE-Theme
macos_titlebar_color background
wayland_titlebar_color background

# ------------------------------------------------------------
# Font: MesloLGS Nerd Font (konsistent mit Starship/eza)
# ------------------------------------------------------------
# Font-Auswahl interaktiv: kitten choose-fonts

font_family      MesloLGS Nerd Font Mono
bold_font        auto
italic_font      auto
bold_italic_font auto
font_size        13.0

# Ligatures aktivieren (f√ºr Fira Code etc.)
disable_ligatures never

# ------------------------------------------------------------
# OS-spezifische Einstellungen
# ------------------------------------------------------------
# Einstellungen mit macos_* Pr√§fix werden auf Linux ignoriert
# Einstellungen mit wayland_* Pr√§fix werden auf macOS ignoriert
# Kein Conditional n√∂tig ‚Äì Kitty ignoriert plattformfremde Settings

# === macOS ===

# Option als Alt-Taste (f√ºr ZSH Word-Movement: Alt+‚Üê Alt+‚Üí)
macos_option_as_alt yes

# Traditioneller Fullscreen (schneller als macOS-Animation)
macos_traditional_fullscreen yes

# Quit wenn letztes Fenster geschlossen (macOS-Verhalten)
macos_quit_when_last_window_closed yes

# Fenster-Titel: Tab-Title in Titlebar und Menubar
macos_show_window_title_in all

# === Linux (Wayland/X11) ===

# Display-Server Wahl: auto | wayland | x11
# auto = System entscheidet (empfohlen)
linux_display_server auto

# ------------------------------------------------------------
# Cursor
# ------------------------------------------------------------

cursor_shape beam
cursor_blink_interval 0.5
cursor_stop_blinking_after 15.0

# ------------------------------------------------------------
# Scrollback
# ------------------------------------------------------------

scrollback_lines 10000

# Scrollback im Pager √∂ffnen: Ctrl+Shift+H
scrollback_pager less --chop-long-lines --RAW-CONTROL-CHARS +INPUT_LINE_NUMBER

# ------------------------------------------------------------
# Window
# ------------------------------------------------------------

# Padding f√ºr bessere Lesbarkeit
window_padding_width 8

# Feste Startgr√∂√üe (120 Spalten √ó 30 Zeilen)
remember_window_size no
initial_window_width  120c
initial_window_height 30c

# Best√§tigung beim Schlie√üen (nur wenn Prozesse laufen)
# -1 = Shell-Prompts werden nicht gez√§hlt (braucht Shell-Integration)
confirm_os_window_close -1

# ------------------------------------------------------------
# Bell
# ------------------------------------------------------------

# Kein Audio-Bell (nur visuell √ºber Tab-Badge)
# Hinweis: Hyprland behauptet Bell-Protokoll zu unterst√ºtzen, spielt aber keinen Sound ab
# https://github.com/hyprwm/Hyprland/issues/10488
enable_audio_bell no
visual_bell_duration 0

# Tab zeigt üîî wenn Bell in unfokussiertem Fenster
bell_on_tab "üîî "

# ------------------------------------------------------------
# Shell Integration (automatisch f√ºr ZSH)
# ------------------------------------------------------------
# Features:
#   - Jump to Prompt: Ctrl+Shift+Z/X
#   - Last Command Output: Ctrl+Shift+G
#   - Click to move cursor in prompt
#   - CWD in Tab-Titel
#   - Beam-Cursor am Prompt

shell_integration enabled

# ------------------------------------------------------------
# Tab Bar
# ------------------------------------------------------------

tab_bar_edge bottom
tab_bar_style powerline
tab_powerline_style slanted
tab_bar_min_tabs 2

# Tab-Titel: Index + Titel (f√ºr goto_tab Shortcuts)
tab_title_template "{index}: {title}"

# Window-Titel: Konsistent mit Terminal.app Format
# Format: user ‚Äî shell ‚Äî cols√órows (via Shell-Integration)

# ------------------------------------------------------------
# URLs
# ------------------------------------------------------------

# URLs unterstreichen beim Hover
detect_urls yes
underline_hyperlinks hover

# URL-Style (curly = gewellt wie in IDEs)
url_style curly

# ------------------------------------------------------------
# Performance
# ------------------------------------------------------------

# VSync f√ºr fl√ºssiges Scrolling
sync_to_monitor yes

# GPU-Rendering (Standard auf macOS: Metal)
# Keine explizite Einstellung n√∂tig

# ------------------------------------------------------------
# Keyboard Shortcuts
# ------------------------------------------------------------
# Kitty-Modifier: Ctrl+Shift (Standard)
# macOS nutzt zus√§tzlich Cmd-Kombinationen

# Die meisten Shortcuts sind sinnvoll voreingestellt.
# Wichtige Defaults:
#   Cmd+T           Neuer Tab
#   Cmd+W           Tab schlie√üen
#   Cmd+Enter       Neues Fenster (Split)
#   Cmd+1-9         Tab 1-9 wechseln
#   Cmd+,           Config editieren
#   Ctrl+Shift+H    Scrollback im Pager
#   Ctrl+Shift+G    Letzten Command-Output im Pager
#   Ctrl+Shift+Z    Zum vorherigen Prompt springen
#   Ctrl+Shift+X    Zum n√§chsten Prompt springen
#   Ctrl+Shift+E    URL √∂ffnen (Hints)

# Reload config (zus√§tzlich zu Ctrl+Shift+F5)
map cmd+shift+r load_config_file
